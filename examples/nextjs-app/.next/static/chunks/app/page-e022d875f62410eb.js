(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8664:function(e,t,a){Promise.resolve().then(a.bind(a,7678))},7678:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(3827),r=a(4090),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let a=(0,r.forwardRef)((a,s)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:m="",children:h,...x}=a;return(0,r.createElement)("svg",{ref:s,...n,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(i(e)),m].join(" "),...x},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a},c=l("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),o=l("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=l("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),m=l("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),h=l("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),x=l("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),u=l("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),y=l("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=a(8009);function f(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[w,b]=(0,r.useState)(null),[j,k]=(0,r.useState)({}),[N,v]=(0,r.useState)("https://github.com/vercel/next.js");(0,r.useEffect)(()=>{C()},[]);let C=async()=>{try{n(!0);let e=await fetch("/api/instances");if(!e.ok)throw Error("Failed to fetch instances");let a=await e.json();t(a)}catch(e){console.error("Failed to load instances:",e),p.default.error("Failed to load instances")}finally{n(!1)}},F=async()=>{l(!0);try{let e=await fetch("/api/instances",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"demo-".concat(Date.now()),region:"iad",size:"shared-cpu-1x",memoryMb:512})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create instance")}let t=await e.json();p.default.success("Instance ".concat(t.name," created successfully!")),await C()}catch(e){console.error("Failed to create instance:",e),p.default.error("Failed to create instance: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{l(!1)}},E=async e=>{if(confirm("Are you sure you want to delete this instance?")){g(e);try{let t=await fetch("/api/instances/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete instance")}p.default.success("Instance deleted successfully!"),await C(),k(t=>{let a={...t};return delete a[e],a})}catch(e){console.error("Failed to delete instance:",e),p.default.error("Failed to delete instance: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{g(null)}}},S=async e=>{g(e);try{let t=await fetch("/api/instances/".concat(e,"/start"),{method:"POST"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to start instance")}p.default.success("Instance started successfully!"),await C()}catch(e){console.error("Failed to start instance:",e),p.default.error("Failed to start instance: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{g(null)}},M=async e=>{g(e);try{let t=await fetch("/api/instances/".concat(e,"/stop"),{method:"POST"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to stop instance")}p.default.success("Instance stopped successfully!"),await C()}catch(e){console.error("Failed to stop instance:",e),p.default.error("Failed to stop instance: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{g(null)}},T=async e=>{g(e);try{let t=await fetch("/api/instances/".concat(e,"/restart"),{method:"POST"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to restart instance")}p.default.success("Instance restarted successfully!"),await C()}catch(e){console.error("Failed to restart instance:",e),p.default.error("Failed to restart instance: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{g(null)}},O=async(e,t)=>{b(e);try{let a=await fetch("/api/commands",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instanceId:e,command:"git",args:["clone",t,"cloned-repo"]})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to clone repository")}let s=await fetch("/api/commands",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instanceId:e,command:"find",args:["cloned-repo","-type","f","-name","*.js","-o","-name","*.ts","-o","-name","*.json","-o","-name","*.md"]})});if(s.ok){let t=(await s.json()).output.split("\n").filter(e=>e.trim()).map(e=>{let t=e.replace("cloned-repo/","").split("/");return{name:t[t.length-1],type:"file",path:e.replace("cloned-repo/","")}}).slice(0,20);k(a=>({...a,[e]:t.map(e=>({name:e.name,type:e.type}))})),p.default.success("Repository cloned! Found ".concat(t.length," files."))}else p.default.success("Repository cloned successfully!")}catch(e){console.error("Failed to clone repository:",e),p.default.error("Failed to clone repository: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{b(null)}},R=e=>{switch(e){case"running":return"status-running";case"stopped":return"status-stopped";case"failed":return"status-failed";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return a?(0,s.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,s.jsx)(c,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading instances..."})]}):(0,s.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Instance Management"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, manage, and deploy Ubuntu instances on Fly.io"})]}),(0,s.jsxs)("button",{onClick:F,disabled:i,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i?(0,s.jsx)(c,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(o,{className:"h-4 w-4 mr-2"}),i?"Creating...":"Create Instance"]})]})}),(0,s.jsxs)("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(d,{className:"h-5 w-5 mr-2 text-blue-600"}),"Git Repository Clone"]}),(0,s.jsx)("div",{className:"flex gap-4 items-end",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Repository URL"}),(0,s.jsx)("input",{type:"url",value:N,onChange:e=>v(e.target.value),placeholder:"https://github.com/user/repo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})})]}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:(0,s.jsx)(m,{className:"h-16 w-16 mx-auto mb-4"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No instances yet"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first Ubuntu instance to get started"}),(0,s.jsxs)("button",{onClick:F,disabled:i,className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors disabled:opacity-50",children:[i?(0,s.jsx)(c,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(o,{className:"h-4 w-4 mr-2"}),i?"Creating...":"Create First Instance"]})]}):(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)("div",{className:"instance-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.region," â€¢ ",e.size]})]}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(R(e.status)),children:e.status})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"ID:"}),(0,s.jsxs)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:[e.id.slice(0,12),"..."]})]}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Memory:"}),(0,s.jsxs)("span",{className:"ml-2 text-gray-900 dark:text-white",children:[e.memoryMb,"MB"]})]}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Created:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-900 dark:text-white",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:["stopped"===e.status&&(0,s.jsxs)("button",{onClick:()=>S(e.id),disabled:f===e.id,className:"flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:[f===e.id?(0,s.jsx)(c,{className:"h-3 w-3 animate-spin mr-1"}):(0,s.jsx)(h,{className:"h-3 w-3 mr-1"}),"Start"]}),"running"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>M(e.id),disabled:f===e.id,className:"flex items-center px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:[f===e.id?(0,s.jsx)(c,{className:"h-3 w-3 animate-spin mr-1"}):(0,s.jsx)(x,{className:"h-3 w-3 mr-1"}),"Stop"]}),(0,s.jsxs)("button",{onClick:()=>T(e.id),disabled:f===e.id,className:"flex items-center px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:[f===e.id?(0,s.jsx)(c,{className:"h-3 w-3 animate-spin mr-1"}):(0,s.jsx)(u,{className:"h-3 w-3 mr-1"}),"Restart"]})]}),(0,s.jsxs)("button",{onClick:()=>E(e.id),disabled:f===e.id,className:"flex items-center px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:[f===e.id?(0,s.jsx)(c,{className:"h-3 w-3 animate-spin mr-1"}):(0,s.jsx)(y,{className:"h-3 w-3 mr-1"}),"Delete"]})]}),"running"===e.status&&(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("button",{onClick:()=>O(e.id,N),disabled:w===e.id,className:"flex-1 flex items-center justify-center px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:[w===e.id?(0,s.jsx)(c,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(d,{className:"h-4 w-4 mr-2"}),w===e.id?"Cloning...":"Clone Repo"]})}),j[e.id]&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-900 rounded border",children:[(0,s.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center",children:[(0,s.jsx)(m,{className:"h-4 w-4 mr-1"}),"Repository Files (",j[e.id].length,")"]}),(0,s.jsx)("div",{className:"file-tree max-h-32 overflow-y-auto",children:j[e.id].map((e,t)=>(0,s.jsx)("div",{className:"file-tree-item file-tree-file",children:e.name},t))})]})]})]},e.id))})]})}}},function(e){e.O(0,[9,971,69,744],function(){return e(e.s=8664)}),_N_E=e.O()}]);